<!DOCTYPE html>
<html class="writer-html5" lang="ja" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>FEP-d556: Server-Level Actor Discovery Using WebFinger - Fediverse Enhancement Proposals 非公式日本語訳</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "FEP-d556: Server-Level Actor Discovery Using WebFinger";
        var mkdocs_page_input_path = "fep/fep-d556.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Fediverse Enhancement Proposals 非公式日本語訳
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Fediverse Enhancement Proposals 非公式日本語訳</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../CONTRIBUTING/">CONTRIBUTING</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Fep</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../fep-0391/">FEP-0391: Special collection proofs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-03c1/">FEP-03c1: Actors without acct-URI</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-0499/">FEP-0499: Delivering to multiple inboxes with a multibox endpoint</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-07d7/">FEP-07d7: A Custom URL Scheme and Web-Based Protocol Handlers for Linking to ActivityPub Resources</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-0837/">FEP-0837: Federated Marketplace</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-0ea0/">FEP-0ea0: Payment Links</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-1311/">FEP-1311: Media Attachments</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-171b/">FEP-171b: Conversation Containers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-1970/">FEP-1970: Chat Links</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-1985/">FEP-1985: Signaling how an OrderedCollection is ordered</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-1b12/">FEP-1b12: Group federation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-2100/">FEP-2100: Unbound Group and Organization</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-2277/">FEP-2277: ActivityPub core types</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-2677/">FEP-2677: Identifying the Application Actor</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-268d/">FEP-268d: Search consent signals for objects</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-2c59/">FEP-2c59: Discovery of a Webfinger address from an ActivityPub actor</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-2e40/">FEP-2e40: The FEP Vocabulary Extension Process</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-3264/">FEP-3264: Federated Work Coordination</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-37f2/">FEP-37f2: a policy for calls for consensus on SWICG group decisions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-3b86/">FEP-3b86: Activity Intents</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-400e/">FEP-400e: Publicly-appendable ActivityPub collections</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-4adb/">FEP-4adb: Dereferencing identifiers with webfinger</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-4ccd/">FEP-4ccd: Pending Followers Collection and Pending Following Collection</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-521a-test-case/">Actor Objects must express signing key as assertionMethod Multikey</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-521a/">FEP-521a: Actorの公開鍵の表現</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-5624/">FEP-5624: Per-object reply control policies</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-5bf0/">FEP-5bf0: Collection sorting and filtering</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-5e53/">FEP-5e53: Opt-out Preference Signals</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-5feb/">FEP-5feb: Search indexing consent for actors</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-612d/">FEP-612d: Identifying ActivityPub Objects through DNS</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-61cf/">FEP-61cf: The OpenWebAuth Protocol</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-6481/">FEP-6481: Specifying ActivityPub extension support with NodeInfo</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-6606/">FEP-6606: ActivityPub client to server collections addressing conventions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-67ff/">FEP-67ff: FEDERATION.md</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-6fcd/">FEP-6fcd: Account Export Container Format</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-73cd/">FEP-73cd: Migration User Stories</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-7458/">FEP-7458: Using the replies collection</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-7502/">FEP-7502: Limiting visibility to authenticated actors</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-7628/">FEP-7628: Move actor</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-76ea/">FEP-76ea: Conversation Threads</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-7888/">FEP-7888: Demystifying the context property</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-7952/">FEP-7952: Roadmap For Actor and Object Portability</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-7d8c/">FEP-7d8c: Documentation: Automation of FEP</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-888d/">FEP-888d: Using https://w3id.org/fep as a base for FEP-specific namespaces</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-8b32/">FEP-8b32: オブジェクト整合性証明</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-8c3f/">FEP-8c3f: Web Monetization</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-8fcf/">FEP-8fcf: Followers collection synchronization across servers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-9091/">FEP-9091: Export Actor Service Endpoint</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-96ff/">FEP-96ff: Explicit signalling of ActivityPub Semantics</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-9967/">FEP-9967: Polls</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-9fde/">FEP-9fde: Mechanism for servers to expose supported operations</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-a070/">FEP-a070: Ordered properties for plain JSON consumers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-a4ed/">FEP-a4ed: The Fediverse Enhancement Proposal Process</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-a5c5/">Web Syndication Methods</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-a974/">FEP-a974: All Actor types should be followable</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-ae0c/">FEP-ae0c: Fediverse Relay Protocols: Mastodon and LitePub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-ae97/">FEP-ae97: Client-side activity signing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-b2b8/">FEP-b2b8: Long-form Text</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-bad1/">FEP-bad1: Object history collection</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-c0e0/">FEP-c0e0: Emoji reactions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-c118/">FEP-c118: Content licensing support</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-c16b/">FEP-c16b: MFM機能のフォーマット</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-c390/">FEP-c390: Identity Proofs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-c4ad/">Viewership History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-c551/">FEP-c551: Use ECMAScript Modules to Create Conformance Tests for Fediverse Enhancement Proposals</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-c5a1/">FEP-c5a1: To-do's</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-c648/">FEP-c648: Blocked Collection</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-c7d3/">FEP-c7d3: Ownership</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-c893/">DOAP</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-cb76/">FEP-cb76: Content Addressed Vocabulary</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-cd47/">FEP-cd47: Federation-friendly Addressing and Deduplication Use-Cases</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-d36d/">FEP-d36d: Sharing Content Across Federated Forums</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">FEP-d556: Server-Level Actor Discovery Using WebFinger</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#summary">Summary</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#terminology">Terminology</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#use-cases">Use Cases</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#discovery">Discovery</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#single-actor-servers">Single Actor Servers</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-d767/">FEP-d767: Extend ActivityPub with Valueflows</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-d8c2/">FEP-d8c2: OAuth 2.0 Profile for the ActivityPub API</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-d9ad/">FEP-d9ad: Create Conformance Tests for Fediverse Enhancement Proposals</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-db0e/">FEP-db0e: Authentication mechanism for non-public groups</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-dc88/">FEP-dc88: Formatting Mathematics</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-dd4b/">FEP-dd4b: Quote Posts</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-e229/">FEP-e229: Best practices for extensibility</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-e232/">FEP-e232: オブジェクトリンク</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-e3e9/">FEP-e3e9: Actor-Relative URLs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-e965-test-case/">Actor Object Migration and Deactivation Syntax</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-e965/">FEP-e965: Move Activity for Migrations and Announce Activity for Tombstone Events</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-eb22/">FEP-eb22: Supported ActivityStreams types with NodeInfo</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-eb48/">Timeline Preferences</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-ef61/">FEP-ef61: Portable Objects</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-efda/">FEP-efda: Followable objects</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-f06f/">FEP-f06f: Object observers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-f1d5/">FEP-f1d5: FediverseソフトウェアのNodeinfo</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-f228/">FEP-f228: Backfilling conversations</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-fb2a/">FEP-fb2a: Actor metadata</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-fe34/">FEP-fe34: Origin-based security model</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fep-fffd/">FEP-fffd: Proxy Objects</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Fediverse Enhancement Proposals 非公式日本語訳</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Fep</li>
      <li class="breadcrumb-item active">FEP-d556: Server-Level Actor Discovery Using WebFinger</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/AmaseCocoa/fep-ja/edit/master/docs/fep/fep-d556.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="fep-d556-server-level-actor-discovery-using-webfinger">FEP-d556: Server-Level Actor Discovery Using WebFinger</h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>このFEPはまだ翻訳されていません。</p>
<p><a href="https://github.com/AmaseCocoa/fep-ja/edit/master/docs/fep/fep-d556.md">ここ</a>から翻訳に協力することができます。</p>
</div>
<h2 id="summary">Summary</h2>
<p>Server-level <a href="https://www.w3.org/TR/activitypub/" title="The ActivityPub protocol is a decentralized social networking protocol based upon the ActivityStreams 2.0 data format. It provides a client to server API for creating, updating and deleting content, as well as a federated server to server API for delivering notifications and content.">ActivityPub</a> actors support server-wide functionality rather than representing a user or the software equivalent (sometimes called a <em>bot</em>). This proposal describes how to discover a server-level actor's URI using <a href="https://tools.ietf.org/html/rfc7033" title="Protocol for discovering information about people or other entities on the Internet using standard HTTP methods">WebFinger</a>.</p>
<h2 id="terminology">Terminology</h2>
<p>The term <em>server</em> is not well-defined. For the purposes of this document, an server is an <em>origin</em> <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy" title="The same-origin policy is a critical security mechanism that restricts how a document or script loaded by one origin can interact with a resource from another origin.">SameOriginPolicy</a> having the same URL prefix (scheme, host, port). The term does not imply anything about network or software architecture. An server could consist of many server processes behind a load-balancing reverse proxy. Or, inversely, a single server process could host many servers (multi-tenant architecture).</p>
<p>Some implementations could have multiple actors to support different server-level roles (moderation, administration, etc.). In this document, the term <em>server-level actor</em> will be used to describe these kind of actors. The term <em>Server Actor</em> or <em>Application Actor</em> is a special, but common, case where there is a single server-level actor.</p>
<p>The term <em>Server</em> is used extensively in the <a href="https://www.w3.org/TR/activitypub/" title="The ActivityPub protocol is a decentralized social networking protocol based upon the ActivityStreams 2.0 data format. It provides a client to server API for creating, updating and deleting content, as well as a federated server to server API for delivering notifications and content.">ActivityPub Recommendation</a>, although it is mostly undefined beyond which activities a server may process. The term is closely related to Mastodon's use of the word <em>instance</em>, although this is not the only way the word is used in online discussions.</p>
<blockquote>
<p>NOTE: The standard role and responsibilities of server-level actors are not defined here (or elsewhere, at the time of this submission). Several implementations have something they call an Instance Actor or Application Actor, but they may or may not be interoperable since no standard behaviors have been defined at this time.</p>
</blockquote>
<h2 id="use-cases">Use Cases</h2>
<p>Although this FEP does not define specific uses of server-level actors, it's useful to know how they are, or could be, used in practice. The following are a some potential use cases:</p>
<ul>
<li>
<p><strong>Signing Fetch Requests:</strong> This appears to be the most common use case. The requirement for this is a combination of: limiting access to actor profiles by requiring HTTP Signatures (i.e., "authorized fetch") and tightly-coupling actor profiles with their public keys. This results in profile/key fetch loops. (<a href="https://seb.jambor.dev/posts/understanding-activitypub-part-4-threads/#the-instance-actor" title="This article documents some request sequences for authorized fetch loops. The article mistakenly associates this behavior with ActivityPub, although it's a non-ActivityPub quirk mostly based on Mastodon implementation designs.">InstanceActor</a>). To mitigate this undesirable behavior, one technique is to have a third-party actor (often called an "instance actor") sign every fetch request. Actor discovery is not required for this use case, but it's mentioned here because it appears to be the motiving use case for <a href="../2677/fep-2677.md" title="FEP-2677: Identifying the Application Actor">FEP-2677</a>, which has some similarities to this one.</p>
</li>
<li>
<p><strong>Relay Support:</strong> A server-level actor can be used for subscribing to a relay (often using an <a href="https://www.w3.org/TR/activitypub/" title="The ActivityPub protocol is a decentralized social networking protocol based upon the ActivityStreams 2.0 data format. It provides a client to server API for creating, updating and deleting content, as well as a federated server to server API for delivering notifications and content.">ActivityPub</a> <code>Follow</code> request) and receiving <code>inbox</code> messages.</p>
</li>
<li>
<p><strong>Server-level Subscriptions:</strong> Some implementations, like <a href="https://pleroma.social/" title="Pleroma is a microblogging server software that can federate (i.e., exchange messages with) other servers that support the same federation standards (OStatus and ActivityPub).">Pleroma</a>, provide an actor that can be followed to receive <a href="https://github.com/mastodon/mastodon/issues/10453" title="Original GitHub issue associated with adding an instance-wide actor to Mastodon.">all messages from an "instance"</a>.</p>
</li>
<li>
<p><strong>Moderation:</strong> A server-level actor may be used to federate moderation-related content (actor or domain blocks, post flags, etc.) or provide a publication proxy to shield the identity of moderators performing the actions.</p>
</li>
<li>
<p><strong>Announcements:</strong> An server-level actor could be used to public server news. For example, it could publish content including announcements about new features, maintenance schedules, or updates.</p>
</li>
<li>
<p><strong>Object Attribution:</strong> Some server implementations allow some objects to be attributed to the server rather than an individual user or account.</p>
</li>
<li>
<p><strong>Administration:</strong> A server-level actor could be used to share information about software issue (including reports from users), available updates, and security vulnerabilities and mitigations.</p>
</li>
</ul>
<h2 id="discovery">Discovery</h2>
<p>To discover an server-level actor's URI, query <a href="https://tools.ietf.org/html/rfc7033" title="Protocol for discovering information about people or other entities on the Internet using standard HTTP methods">WebFinger</a> with the server prefix as the resource query parameter.</p>
<p>Example Request:</p>
<pre><code>GET /.well-known/webfinger?resource=https://server.example/
</code></pre>
<p>Response:</p>
<pre><code class="language-json">{
    &quot;subject&quot;: &quot;https://server.example/&quot;,
    &quot;links&quot;: [
        {
            &quot;rel&quot;: &quot;https://www.w3.org/ns/activitystreams#Service&quot;,
            &quot;type&quot;: &quot;application/activity+json&quot;,
            &quot;href&quot;: &quot;https://server.example/actor&quot;
        }
    ]
}
</code></pre>
<p>The <code>subject</code> would typically be the resource URI. This proposal does not depend on any specific URI for <code>subject</code>, although the ActivityPub actor URI is recommended.</p>
<p>The Server-level Actor's URI will be the <code>href</code> property of a <code>link</code> with a <code>rel</code> (relation type) property of <code>https://www.w3.org/ns/activitystreams#Service</code> (<a href="https://www.w3.org/wiki/Activity_Streams/Primer/Service_type" title="W3c AS2 Primer for the Service type">W3C AS2 Service Primer</a>). The type of the Server-level Actor itself is not required to be the same as the relation type.</p>
<p>The <code>https://www.w3.org/ns/activitystreams#Service</code> <code>rel</code> value may be replaced with <code>self</code> if there is no ambiguity between the server-level actor and user's actor in a single actor server (see discussion of <a href="#single-actor-servers">single-actor servers</a>).</p>
<p>A <code>http://webfinger.net/rel/profile-page</code> <code>rel</code> (<a href="https://webfinger.net/rel" title="WebFinger link relations defined at webfinger.net">WebFinger Relations</a>) can be used to link to server metadata (possibly with multiple content types). However, the structure of the target metadata has not been defined at this time. For example, the following links refer to profile data in HTML and JSON-LD formats.</p>
<pre><code class="language-json">{
    &quot;subject&quot;: &quot;https://server.example/&quot;,
    &quot;links&quot;: [
        {
            &quot;rel&quot;: &quot;https://www.w3.org/ns/activitystreams#Service&quot;,
            &quot;type&quot;: &quot;application/activity+json&quot;,
            &quot;href&quot;: &quot;https://server.example/actor&quot;
        },
        {
            &quot;rel&quot;: &quot;http://webfinger.net/rel/profile-page&quot;,
            &quot;type&quot;: &quot;text/html&quot;,
            &quot;href&quot;: &quot;https://server.example/profile&quot;
        },
        {
            &quot;rel&quot;: &quot;http://webfinger.net/rel/profile-page&quot;,
            &quot;type&quot;: &quot;application/ld+json&quot;,
            &quot;href&quot;: &quot;https://server.example/profile&quot;
        }
    ]
}
</code></pre>
<p>If multiple server-level actor links are returned, the links can be disambiguated by adding metadata to the links using standard <a href="https://tools.ietf.org/html/rfc7033" title="Protocol for discovering information about people or other entities on the Internet using standard HTTP methods">WebFinger</a> properties. For example, an implementation could have different server-level actors that serve different purposes. </p>
<p>It's also possible that another FEP will define standard <code>rel</code> URIs for common roles. In that case, those FEP role URIs SHOULD be preferred. </p>
<blockquote>
<p>NOTE: The definition of standard server-level actor roles is outside the scope of this FEP.</p>
</blockquote>
<pre><code class="language-json">{
    &quot;subject&quot;: &quot;https://server.example/&quot;,
    &quot;links&quot;: [
        {
            &quot;rel&quot;: &quot;https://www.w3.org/ns/activitystreams#Service&quot;,
            &quot;type&quot;: &quot;application/activity+json&quot;,
            &quot;href&quot;: &quot;https://server.example/actor&quot;,
            &quot;properties&quot;: {
              &quot;http://schema.org/roleName&quot;: &quot;administration&quot;
            }
        },
        {
            &quot;rel&quot;: &quot;https://www.w3.org/ns/activitystreams#Service&quot;,
            &quot;type&quot;: &quot;application/activity+json&quot;,
            &quot;href&quot;: &quot;https://server.example/actor&quot;,
            &quot;properties&quot;: {
              &quot;http://schema.org/roleName&quot;: &quot;moderation&quot;
            }
        }
    ]
}
</code></pre>
<p>In this example, the same actor used used for administration and moderation. However, the example would also be valid if the actors were different. It's possible that for some use cases a role might be further refined. For example, additional properties might specify a geographical region for a role.</p>
<h2 id="single-actor-servers"><a id="single-actor-servers"></a> Single Actor Servers</h2>
<p>A developer of a single-actor (user actor) server may want that user to have a URI corresponding to the server prefix although it's not intended to be an server-level actor. This scenario, which is not expected to be a common one, can be supported by returning multiple links in the <a href="https://tools.ietf.org/html/rfc7033" title="Protocol for discovering information about people or other entities on the Internet using standard HTTP methods">WebFinger</a> response.</p>
<pre><code class="language-json">{
    &quot;subject&quot;: &quot;https://server.example/&quot;,
    &quot;links&quot;: [
        {
            &quot;rel&quot;: &quot;https://www.w3.org/ns/activitystreams#Service&quot;,
            &quot;type&quot;: &quot;application/activity+json&quot;,
            &quot;href&quot;: &quot;https://server.example/server-actor&quot;
        },
        {
            &quot;rel&quot;: &quot;self&quot;,
            &quot;type&quot;: &quot;application/activity+json&quot;,
            &quot;href&quot;: &quot;https://server.example/user-actor&quot;
        }
    ]
}
</code></pre>
<p>If an application is only interested in a the Server Actor or User Actor specifically, it can use the <code>rel</code> query parameter to filter the links, as described in the <a href="https://tools.ietf.org/html/rfc7033" title="Protocol for discovering information about people or other entities on the Internet using standard HTTP methods">WebFinger</a> specification (if supported by the <a href="https://tools.ietf.org/html/rfc7033" title="Protocol for discovering information about people or other entities on the Internet using standard HTTP methods">Webfinger</a> service implementation).</p>
<p>For example, to only query the User Actor URI, the query would be:</p>
<pre><code>GET /.well-known/webfinger?resource=https://server.example/&amp;rel=self
</code></pre>
<pre><code class="language-json">{
    &quot;subject&quot;: &quot;https://server.example/&quot;,
    &quot;links&quot;: [
        {
            &quot;rel&quot;: &quot;self&quot;,
            &quot;type&quot;: &quot;application/activity+json&quot;,
            &quot;href&quot;: &quot;https://server.example/user-actor&quot;
        }
    ]
}
</code></pre>
<h1 id="implementations">Implementations</h1>
<p>Known implementations include:</p>
<ul>
<li>FIRM</li>
<li><a href="https://joinmastodon.org/" title="Self-hosted, globally interconnected microblogging software">Mastodon</a> implements something similar to this proposal. </li>
</ul>
<h2 id="mastodon-example">Mastodon Example</h2>
<pre><code>GET /.well-known/webfinger?resource=https://mastodon.social/
Host: https://mastodon.social
</code></pre>
<p>or using Mastodon account-based URI:</p>
<pre><code>GET /.well-known/webfinger?resource=acct:mastodon.social@mastodon.social
Host: https://mastodon.social
</code></pre>
<pre><code class="language-json">{
  &quot;subject&quot;: &quot;acct:mastodon.social@mastodon.social&quot;,
  &quot;aliases&quot;: [
    &quot;https://mastodon.social/actor&quot;
  ],
  &quot;links&quot;: [
    {
      &quot;rel&quot;: &quot;http://webfinger.net/rel/profile-page&quot;,
      &quot;type&quot;: &quot;text/html&quot;,
      &quot;href&quot;: &quot;https://mastodon.social/about/more?instance_actor=true&quot;
    },
    {
      &quot;rel&quot;: &quot;self&quot;,
      &quot;type&quot;: &quot;application/activity+json&quot;,
      &quot;href&quot;: &quot;https://mastodon.social/actor&quot;
    },
    {
      &quot;rel&quot;: &quot;http://ostatus.org/schema/1.0/subscribe&quot;,
      &quot;template&quot;: &quot;https://mastodon.social/authorize_interaction?uri={uri}&quot;
    }
  ]
}
</code></pre>
<p>Some differences between the Mastodon implementation and this proposal include:</p>
<ul>
<li>
<p>It does not support standard <a href="https://tools.ietf.org/html/rfc7033" title="Protocol for discovering information about people or other entities on the Internet using standard HTTP methods">WebFinger</a> filtering by <code>rel</code>.</p>
</li>
<li>
<p>The <code>subject</code> is the Mastodon-specific account URI for the server-level actor rather than the recommended <a href="https://www.w3.org/TR/activitypub/" title="The ActivityPub protocol is a decentralized social networking protocol based upon the ActivityStreams 2.0 data format. It provides a client to server API for creating, updating and deleting content, as well as a federated server to server API for delivering notifications and content.">ActivityPub</a> actor URI.</p>
</li>
</ul>
<p>Since no user-related actor link is provided for the server resource, the <code>self</code> <code>rel</code> value can be used without ambiguity</p>
<h2 id="related-proposals">Related Proposals</h2>
<p><a href="../2677/fep-2677.md" title="FEP-2677: Identifying the Application Actor">FEP-2677</a> suggests using <a href="http://nodeinfo.diaspora.software/protocol.html" title="NodeInfo defines a standardized way to expose metadata about an installation of a distributed social network">NodeInfo</a> for a similar purpose. There are several disadvantages of this compared to using <a href="https://tools.ietf.org/html/rfc7033" title="Protocol for discovering information about people or other entities on the Internet using standard HTTP methods">WebFinger</a>. </p>
<ul>
<li>Although <a href="https://tools.ietf.org/html/rfc7033" title="Protocol for discovering information about people or other entities on the Internet using standard HTTP methods">WebFinger</a> is not required by the <a href="https://www.w3.org/TR/activitypub/" title="The ActivityPub protocol is a decentralized social networking protocol based upon the ActivityStreams 2.0 data format. It provides a client to server API for creating, updating and deleting content, as well as a federated server to server API for delivering notifications and content.">ActivityPub</a> Recommendation, it is required for federation with most ActivityPub-based implementations (e.g., Mastodon and compatible implementations). <a href="http://nodeinfo.diaspora.software/protocol.html" title="NodeInfo defines a standardized way to expose metadata about an installation of a distributed social network">NodeInfo</a> is not required for federation, so requiring it's use for this purpose increases the complexity of federation with no benefits.</li>
<li><a href="https://tools.ietf.org/html/rfc7033" title="Protocol for discovering information about people or other entities on the Internet using standard HTTP methods">WebFinger</a> has been standardized by the Internet Engineering Task Force (IETC). <a href="http://nodeinfo.diaspora.software/protocol.html" title="NodeInfo defines a standardized way to expose metadata about an installation of a distributed social network">NodeInfo</a> is defined informally.</li>
<li><a href="https://tools.ietf.org/html/rfc7033" title="Protocol for discovering information about people or other entities on the Internet using standard HTTP methods">WebFinger</a> is already used to resolve resource identifiers and provide links to server-level metadata (e.g., profile page URLs). <a href="http://nodeinfo.diaspora.software/protocol.html" title="NodeInfo defines a standardized way to expose metadata about an installation of a distributed social network">NodeInfo</a> is primarily used for gathering and aggregating server metadata.</li>
<li><a href="../2677/fep-2677.md" title="FEP-2677: Identifying the Application Actor">FEP-2677</a> adds a new non-standard <code>rel</code> relation to the <a href="http://nodeinfo.diaspora.software/protocol.html" title="NodeInfo defines a standardized way to expose metadata about an installation of a distributed social network">NodeInfo</a> index document. This may have surprising effects on some consuming implementations. This proposal is using <a href="https://tools.ietf.org/html/rfc7033" title="Protocol for discovering information about people or other entities on the Internet using standard HTTP methods">WebFinger</a> in standard ways.</li>
<li>Given an <a href="https://www.w3.org/TR/activitystreams-vocabulary" title="This specification describes the Activity vocabulary. It is intended to be used in the context of the ActivityStreams 2.0 format and provides a foundational vocabulary for activity structures, and specific activity types.">ActivityVocabulary</a> actor type is being used for the WebFinger <code>rel</code> value, a <code>as:Service</code> (<a href="https://www.w3.org/wiki/Activity_Streams/Primer/Service_type" title="W3c AS2 Primer for the Service type">Primer</a>) is the type suggested by the W3C ActivityStreams Primers for this kind of resource rather than <code>as:Application</code> (<a href="https://www.w3.org/wiki/Activity_Streams/Primer/Application_type" title="W3c AS2 Primer for the Application type">Primer</a>). (Note this is distinct from the type specified in the server-level actor resource that's linked from WebFinger.)</li>
<li><a href="../2677/fep-2677.md" title="FEP-2677: Identifying the Application Actor">FEP-2677</a> only defines a singleton server-level actor. This proposal allows that use case but has more flexibility for advanced implementations.</li>
<li><a href="../2677/fep-2677.md" title="FEP-2677: Identifying the Application Actor">FEP-2677</a> Requires actors to have an <code>as:Application</code> type. This proposal has no constraints on the actor type. The <code>as:Service</code> URI is only used for the link relation type.</li>
</ul>
<p>Although the definition isn't clear, the "Application Actor" in <a href="../2677/fep-2677.md" title="FEP-2677: Identifying the Application Actor">FEP-2677</a> appears to be a proxy for a software "application" (not defined, but appears to be a similar concept to "server" in this proposal). For example, there's a discussion about attaching application metadata to the actor. In this proposal, there is no server proxy actor (although that's not prohibited). There is a server WebFinger resource with linked server-level service actors, but the server resource is not necessarily an actor itself.</p>
<p><a href="../2c59/fep-2c59.md" title="FEP-2c59: Discovery of a Webfinger address from an ActivityPub actor">FEP-2c59</a> discusses how to discover <a href="https://tools.ietf.org/html/rfc7033" title="Protocol for discovering information about people or other entities on the Internet using standard HTTP methods">WebFinger</a> resource URIs from an <a href="https://www.w3.org/TR/activitypub/" title="The ActivityPub protocol is a decentralized social networking protocol based upon the ActivityStreams 2.0 data format. It provides a client to server API for creating, updating and deleting content, as well as a federated server to server API for delivering notifications and content.">ActivityPub</a> actor resource. This is not related to server-level actor discovery.</p>
<p><a href="../4adb/fep-4adb.md" title="FEP-4adb: Dereferencing identifiers with webfinger">FEP-4adb</a> discusses dereferencing identifiers with WebFinger. It's similar to this proposal but not specifically related to discovering server-level actors.</p>
<h2 id="_1">参考文献</h2>
<ul>
<li>Christine Lemmer Webber, Jessica Tallon, <a href="https://www.w3.org/TR/activitypub/" title="The ActivityPub protocol is a decentralized social networking protocol based upon the ActivityStreams 2.0 data format. It provides a client to server API for creating, updating and deleting content, as well as a federated server to server API for delivering notifications and content.">ActivityPub</a>, 2018</li>
<li>James M Snell, Evan Prodromou, <a href="https://www.w3.org/TR/activitystreams-vocabulary" title="This specification describes the Activity vocabulary. It is intended to be used in the context of the ActivityStreams 2.0 format and provides a foundational vocabulary for activity structures, and specific activity types.">ActivityStreams Vocabulary</a>, 2017</li>
<li>W3C ActivityStreams Primer - <a href="https://www.w3.org/wiki/Activity_Streams/Primer/Application_type" title="W3c AS2 Primer for the Application type">Application type</a></li>
<li>W3C ActivityStreams Primer - <a href="https://www.w3.org/wiki/Activity_Streams/Primer/Service_type" title="W3c AS2 Primer for the Service type">Service type</a></li>
<li>Eugen Rochko, <a href="https://joinmastodon.org/" title="Self-hosted, globally interconnected microblogging software">Mastodon</a>, 2016</li>
<li>Jonne Haß, <a href="http://nodeinfo.diaspora.software/protocol.html" title="NodeInfo defines a standardized way to expose metadata about an installation of a distributed social network">NodeInfo 2.1</a></li>
<li>MDN, <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy" title="The same-origin policy is a critical security mechanism that restricts how a document or script loaded by one origin can interact with a resource from another origin.">Same-origin Policy</a></li>
<li>Brad Fitzpatrick, <a href="https://tools.ietf.org/html/rfc7033" title="Protocol for discovering information about people or other entities on the Internet using standard HTTP methods">WebFinger</a>, 2013</li>
<li>WebFinger.net <a href="https://webfinger.net/rel" title="WebFinger link relations defined at webfinger.net">Link Relations</a></li>
</ul>
<h2 id="_2">著作権</h2>
<p>CC0 1.0 ユニバーサル (CC0 1.0) パブリック ドメイン</p>
<p>法律で認められる範囲において、この Fediverse 拡張提案の著者は、この作品に対するすべての著作権および関連する権利または隣接する権利を放棄しています。</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../fep-d36d/" class="btn btn-neutral float-left" title="FEP-d36d: Sharing Content Across Federated Forums"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../fep-d767/" class="btn btn-neutral float-right" title="FEP-d767: Extend ActivityPub with Valueflows">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/AmaseCocoa/fep-ja" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../fep-d36d/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../fep-d767/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
